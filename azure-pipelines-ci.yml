trigger:
  branches:
    include:
    - '*'

# YAML PR triggers are only supported in GitHub and Bitbucket Cloud. If you are using Azure Repos Git, you can configure a branch policy for build validation in order to trigger your pipeline for validation.  
# Source: https://docs.microsoft.com/en-us/azure/devops/pipelines/build/triggers?view=azure-devops&tabs=yaml#pr-triggers
pr:
  branches:
    include:
    - 'master'
    - 'develop'

strategy:
  maxParallel: 2
  matrix:    
    linux_node_12:
      vmImage: 'ubuntu-latest'
      nodeVersionSpec: '12.x'
    mac_node_12:
      vmImage: 'macos-latest'
      nodeVersionSpec: '12.x'
    windows_node_12:
      vmImage: 'windows-latest'
      nodeVersionSpec: '12.x'    

steps:
- template: azure-pipelines/cloudcommons-node-build.yaml 
  parameters:
    azureSubscription: $(AZURE_SUBSCRIPTION)
    pool: $(vmImage)
    nodeVersionSpec: $(nodeVersionSpec)


